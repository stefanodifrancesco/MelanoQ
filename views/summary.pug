extends layout

block append style
    link(rel='stylesheet', href='/stylesheet/summary.css')

block content
  div.profile-header
      button.questionnaires-list-button(onclick="window.location.href = '/home';")
        |  QUESTIONNAIRES<br>
        i.fa.fa-caret-down

      button.new-questionnaire-button(onclick="var t = document.getElementById(\"msform\"); t.classList.add(\"fade-out-top\"); window.location.href = '/stepform';")
        |  CREATE NEW<br>
        i.fa.fa-caret-down
          
      button.statistics-button(onclick="var t = document.getElementById(\"msform\"); t.classList.add(\"fade-out-top\"); window.location.href = '/statistics';")
        |  STATISTICS<br>
        i.fa.fa-caret-down

      button.btn.logout-button(onclick="window.location.href = '/logout';")
          |  Logout

  .form
    form#msform.fade-in-top(action="/update" method="POST" autocomplete="off")
      fieldset
        div.scrollingdiv
          h2.fs-title QUESTIONNAIRE SUMMARY
          h3.fs-subtitle Database code number #{result.general.code_number}
          
          <details>
            <summary>GENERAL</summary>
            <hr/>
            fieldset
              table.summary-table
                tbody
                  tr
                    td
                      legend Subject
                      span #{result.general.subject}
                          
                    td
                      legend Database code number
                      span #{result.general.code_number}
                  tr
                    td
                      legend Date of questionnaire administration and phenotyping
                      span #{result.general.survey_date}
                  if result.general.survey_date == ""
                    td
                      legend Dates of updated questionnaire and/or phenotyping
                      span #{result.general.last_update}
                  tr
                    td
                      legend Type of melanoma
                      span #{result.general.melanoma_type}
                  if result.general.melanoma_type == "Other"
                    tr
                      td
                        legend Other (complex family history)
                        span #{result.general.other_melanoma_type}
          
          </details>
          


          <details>
            <summary>DEMOGRAPHIC</summary>
            <hr/>
            table.summary-table
              tbody
                tr
                  td
                    legend Sex
                    span #{result.demographic.gender}
                  td
                    legend Date and place of birth
                    span #{result.demographic.birthday} at #{result.demographic.place_of_birth}
                  td
                    legend Weight and height
                    span #{result.demographic.weight} cm #{result.demographic.height} Kg

                tr
                  td
                    legend Ethnicity
                    span #{result.demographic.ethnicity}
                  if result.demographic.ethnicity == "Other"
                    td
                      legend Other ethnicity
                      span #{result.demographic.other_ethnicity}

            if (typeof(result.demographic.residency_list) !== 'undefined')
              .tables_list
                legend Residencies list
                <table class="json-to-table">
                  <thead>
                    <tr>
                      <th class="jsl"></th>
                      <th>Start Date</th>
                      <th>End Date</th>
                      <th>Address</th>
                      <th>Coordinates</th>
                    </tr>
                  </thead>
                  <tbody>
                    each residency in result.demographic.residency_list
                      <tr>
                        <td class="jsl">1</td>
                        <td>#{residency.start_date}</td>
                        <td>#{residency.end_date}</td>
                        <td>#{residency.address}</td>
                        <td>#{residency.coordinates}</td>
                      </tr>
                  </tbody>
                </table>
                    
            table.summary-table
              tbody
                tr
                  td
                    legend Education
                    span #{result.demographic.education}
                  td
                    legend Current occupational status
                    span #{result.demographic.occupational_status}

            if (typeof(result.demographic.SIC_list) !== 'undefined')
              .tables_list
                legend History of occupations
                <table class="json-to-table">
                  <thead>
                    <tr>
                      <th class="jsl"></th>
                      <th>SIC Group</th>
                      <th>SIC Code</th>
                      <th>Start Date</th>
                      <th>End Date</th>
                    </tr>
                  </thead>
                  <tbody>
                    each SIC in result.demographic.SIC_list
                      <tr>
                        <td class="jsl">1</td>
                        <td>#{SIC.SIC_Group}</td>
                        <td>#{SIC.SIC_Code}</td>
                        <td>#{SIC.start_date}</td>
                        <td>#{SIC.end_date}</td>
                      </tr>
                  </tbody>
                </table>
              
              
          </details>



          <details>
            <summary>PHENOTYPE</summary>
            <hr/>

            table.summary-table
              tbody 
                tr
                  td
                    legend Skin response to sun exposure
                    span #{result.phenotype.skin_response}
            table.summary-table(style='border-spacing: 0px 15px;')
              tbody 
                tr    
                  td
                    legend(style="text-align: center;") Skin tan
                    if result.phenotype.skin_tan == "No tan"
                      div(style="height: 135px;")
                        img(src='img/Skin-Tan/No_Tan_1.png' width='100' height='110' style="margin-top: 14px; margin-left: 15px;")
                    if result.phenotype.skin_tan == "Tans lightly"
                      div(style="height: 135px;")
                        img(src='img/Skin-Tan/Light_Tan_1.png' width='100' height='110' style="margin-top: 14px; margin-left: 15px;")
                    if result.phenotype.skin_tan == "Tans moderately"
                      div(style="height: 135px;")
                        img(src='img/Skin-Tan/Moderate_Tan_1.png' width='100' height='110' style="margin-top: 14px; margin-left: 15px;")
                    if result.phenotype.skin_tan == "Tans deeply"
                      div(style="height: 135px;")
                        img(src='img/Skin-Tan/Deep_Tan_1.png' width='100' height='110' style="margin-top: 14px; margin-left: 15px;")
                  td
                    legend(style="text-align: center;") Eye color
                    if result.phenotype.eye_color == "Light"
                      div(style="height: 135px;")
                        img(src='img/Color-Eye/Light_eyes-removebg.png' width='150' height='75' style="margin-top: 20px; margin-left: 30px;")
                    if result.phenotype.eye_color == "Medium"
                      div(style="height: 135px;")
                        img(src='img/Color-Eye/Medium_eyes-removebg.png' width='150' height='75' style="margin-top: 20px; margin-left: 30px;")
                    if result.phenotype.eye_color == "Dark"
                      div(style="height: 135px;")
                        img(src='img/Color-Eye/Dark_eyes-removebg.png' width='120' height='75' style="margin-top: 20px; margin-left: 15px;")
                  td
                    legend(style="text-align: center;") Hair color
                    if result.phenotype.hair_color == "Red"
                      div(style="height: 135px;")
                        img(src='img/Color-hair/Red_hair-removebg.png' width='150' height='50' style="margin-top: 38px;")
                    if result.phenotype.hair_color == "Blonde"
                      div(style="height: 135px;")
                        img(src='img/Color-hair/Blonde_hair-removebg.png' width='150' height='50' style="margin-top: 38px;")
                    if result.phenotype.hair_color == "Light brown"
                      div(style="height: 135px;")
                        img(src='img/Color-hair/Light_brown_hair-removebg.png' width='100' height='50' style="margin-top: 38px;")
                    if result.phenotype.hair_color == "Dark brown"
                      div(style="height: 135px;")
                        img(src='img/Color-hair/Dark_brown_hair-removebg.png' width='150' height='50' style="margin-top: 38px;")
                    if result.phenotype.hair_color == "Black"
                      div(style="height: 135px; width: 80px;")
                        img(src='img/Color-hair/Dark_hair-removebg.png' width='50' height='50' style="margin-left: 14px; margin-top: 38px;")
                  td
                    legend(style="text-align: center;") Freckles
                    if result.phenotype.freckles == "None"
                      div(style="height: 135px;")
                        img(src='img/Freckles/No_freckles.png' width='100' height='130' style="margin-left: 7px;")
                    if result.phenotype.freckles == "Few"
                      div(style="height: 135px;")
                        img(src='img/Freckles/Few_freckles.png' width='100' height='130' style="margin-left: 7px;")
                    if result.phenotype.freckles == "Some"
                      div(style="height: 135px;")
                        img(src='img/Freckles/Some_freckles.png' width='100' height='130' style="margin-left: 7px;")
                    if result.phenotype.freckles == "Many"
                      div(style="height: 135px;")
                        img(src='img/Freckles/Many_freckles.png' width='100' height='130' style="margin-left: 7px;")
                  td
                    legend(style="text-align: center;") Nevi frequency
                    if result.phenotype.nevi == "None"
                      div(style="height: 135px; width: 118px;")
                        img(src='img/Nevi/None_Nevi.png' width='100' height='130' style="margin-left: 8px;")
                    if result.phenotype.nevi == "Few"
                      div(style="height: 135px; width: 118px;")
                        img(src='img/Nevi/Few_Nevi.png' width='100' height='130' style="margin-left: 8px;")
                    if result.phenotype.nevi == "Some"
                      div(style="height: 135px; width: 118px;")
                        img(src='img/Nevi/Some_Nevi.png' width='100' height='130' style="margin-left: 8px;")
                    if result.phenotype.nevi == "Many"
                      div(style="height: 135px; width: 118px;")
                        img(src='img/Nevi/Many_Nevi.png' width='100' height='130' style="margin-left: 8px;")      
          
          </details>
          


          <details>
            <summary>ULTRAVIOLET EXPOSURE</summary>
            <hr/>

            table.summary-table
              tbody
                tr
                  td(colspan="5")
                    legend Occupational sun exposure
                    span #{result.ultraviolet.occupational_sun_exposure.presence}
                if result.ultraviolet.occupational_sun_exposure.presence == "Yes"
                  tr
                    td
                      legend Occupation
                      span #{result.ultraviolet.occupational_sun_exposure.occupation_name}
                  
                    td
                      legend Hours/day
                      span #{result.ultraviolet.occupational_sun_exposure.hours_day}
                  
                    td
                      legend Hours/month
                      span #{result.ultraviolet.occupational_sun_exposure.hours_month}
                  
                    td
                      legend Hours/year
                      span #{result.ultraviolet.occupational_sun_exposure.hours_year}
                  
                    td
                      legend How many years ?
                      span #{result.ultraviolet.occupational_sun_exposure.number_of_years}
                tr
                  td(colspan="5")
                    legend Recreational sun exposure 
                    span #{result.ultraviolet.recreational_sun_exposure.presence}
                if result.ultraviolet.recreational_sun_exposure.presence == "Yes"
                  tr
                    td
                      legend Occupation
                      span #{result.ultraviolet.recreational_sun_exposure.occupation_name}
                  
                    td
                      legend Hours/day
                      span #{result.ultraviolet.recreational_sun_exposure.hours_day}
                  
                    td
                      legend Hours/month
                      span #{result.ultraviolet.recreational_sun_exposure.hours_month}
                  
                    td
                      legend Hours/year
                      span #{result.ultraviolet.recreational_sun_exposure.hours_year}
                  
                    td
                      legend How many years ?
                      span #{result.ultraviolet.recreational_sun_exposure.number_of_years}

            .tables_list
              legend Intermittent sun exposure 
              .form-group
                .divTable
                  .divTableBody
                    .divTableRow(style="border: 1px solid rgb(221, 221, 221); background-color: rgb(243, 243, 243); color: rgb(14, 14, 14); height: 30px; font-family: Verdana, Helvetica, Arial, FreeSans, sans-serif; font-size: 14px; text-transform: capitalize;")
                      .divTableCell Age Period
                      .divTableCell Exposure Period
                      .divTableCell Exposure Time
                    .divTableRow
                      .divTableCell
                      .divTableCell Weeks of vacation
                      .divTableCell Hours spent between 11AM and 4PM
                    .divTableRow
                      .divTableCell Childhood (ulegend to age 10 yrs)
                      .divTableCell
                        span #{result.ultraviolet.exposure_childhood.period}
                      .divTableCell
                        span #{result.ultraviolet.exposure_childhood.time}
                    .divTableRow
                      .divTableCell Adolescence (11-18 yrs)
                      .divTableCell
                        span #{result.ultraviolet.exposure_adolescence.period}
                      .divTableCell
                        span #{result.ultraviolet.exposure_adolescence.time}
                    .divTableRow
                      .divTableCell Adulthood (&ge;18 yrs)
                      .divTableCell
                        span #{result.ultraviolet.exposure_adulthood.period}
                      .divTableCell
                        span #{result.ultraviolet.exposure_adulthood.time}
                    .divTableRow
                      .divTableCell(style='font-size:10px;')
                        | 10 years before melanoma diagnosis (for
                        | cases) or last 10 years
                        | (for controls)
                      .divTableCell
                        span #{result.ultraviolet.exposure_previous_10_years.period}
                      .divTableCell
                        span #{result.ultraviolet.exposure_previous_10_years.time}

            table.summary-table
              tbody                        
                tr
                  td
                    legend Most recent intense intermittent sun exposure
                    span #{result.ultraviolet.most_recent_sunburn}
                
                tr
                  td(colspan="2")
                    legend Sunburns at age less than 18 years
                    span #{result.ultraviolet.sunburn_before_18.presence}
                  if result.ultraviolet.sunburn_before_18.presence == "Yes"
                    td(colspan="3")
                      legend Number of sunburns at age less than 18 years
                      span #{result.ultraviolet.sunburn_before_18.number}
                
                tr
                  td(colspan="2")
                    legend Sunburns at age greater than 18 years
                    span #{result.ultraviolet.sunburn_after_18.presence}
                  if result.ultraviolet.sunburn_after_18.presence == "Yes"
                    td(colspan="3")
                      legend Number of sunburns at age greater than 18 years
                      span #{result.ultraviolet.sunburn_after_18.number}

                tr
                  td
                    legend At site of melanoma
                    span #{result.ultraviolet.sunburn_at_melanoma_site}
                tr
                  td(colspan="2")
                    legend In the last 5 years
                    span #{result.ultraviolet.sunburn_last_5_years.presence}
                  if result.ultraviolet.sunburn_last_5_years.presence == "Yes"
                    td(colspan="3")
                      legend Number in the last 5 years
                      span #{result.ultraviolet.sunburn_last_5_years.number}

            .tables_list
              legend Sunscreen use 
              .form-group
                .divTable
                  .divTableBody
                    .divTableRow(style="border: 1px solid rgb(221, 221, 221); background-color: rgb(243, 243, 243); color: rgb(14, 14, 14); height: 30px; font-family: Verdana, Helvetica, Arial, FreeSans, sans-serif; font-size: 14px; text-transform: capitalize;")
                      .divTableCell Age Period
                      .divTableCell Summer Sunscreen
                      .divTableCell Summer Sunscreen
                    .divTableRow
                      .divTableCell
                      .divTableCell Did you use sunscreen during summertime?
                      .divTableCell Type of sunscreen used
                    .divTableRow
                      .divTableCell Childhood (ulegend to age 10 yrs)
                      .divTableCell
                        span #{result.ultraviolet.childhood_sunscreen.frequency}
                      .divTableCell
                        span #{result.ultraviolet.childhood_sunscreen.type}
                    .divTableRow
                      .divTableCell Adolescence (11-18 yrs)
                      .divTableCell
                        span #{result.ultraviolet.adolescence_sunscreen.frequency}
                      .divTableCell
                        span #{result.ultraviolet.adolescence_sunscreen.type}
                    .divTableRow
                      .divTableCell Adulthood (&ge;18 yrs)
                      .divTableCell
                        span #{result.ultraviolet.adulthood_sunscreen.frequency}
                      .divTableCell
                        span #{result.ultraviolet.adulthood_sunscreen.type}
                    .divTableRow
                      .divTableCell(style='font-size:10px;')
                        | 10 years before melanoma diagnosis (for
                        | cases) or last 10 years
                        | (for controls)
                      .divTableCell
                        span #{result.ultraviolet.last_10_years_sunscreen.frequency}
                      .divTableCell
                        span #{result.ultraviolet.last_10_years_sunscreen.type}
                        
            table.summary-table
              tbody  
                tr
                  td
                    legend Did you use a hat?
                    span #{result.ultraviolet.hat_frequency}
                  td
                    legend Did you use protective clothing?
                    span #{result.ultraviolet.clothing}
                  td
                    legend Exposure during peak UVR hours
                    span #{result.ultraviolet.peak_UVR_hours}

                tr
                  td
                    legend Sunlamps/sunbeds
                    span #{result.ultraviolet.sunlamp.presence}
                if result.ultraviolet.sunlamp.presence == "Yes"
                  tr
                    td
                      legend Number of sunlamps/sunbeds
                      span #{result.ultraviolet.sunlamp.number_of_sessions}
                    td
                      legend Age of first sunlamps/sunbeds
                      span #{result.ultraviolet.sunlamp.age__of_first_sunlamp}
                    td
                      legend Age of last sunlamps/sunbeds
                      span #{result.ultraviolet.sunlamp.age_of_last_sunlamp}
                  
                tr
                  td
                    legend Phototherapy (UVB-PUVA)
                    span #{result.ultraviolet.phototherapy}
          
          </details>
          


          <details>
            <summary>LIFESTYLE HABITS</summary>
            <hr/>

            table.summary-table
              tbody
                  tr
                    td
                      legend Smoking
                      span #{result.lifestyle.smoking.frequency}
                  if result.lifestyle.smoking.frequency != "Never"

                    tr
                      td
                        legend Starting age
                        span #{result.lifestyle.smoking.age_of_first_smoking}
                      td
                        legend Number of years
                        span #{result.lifestyle.smoking.smoking_period}
                      td
                        legend Frequency
                        span #{result.lifestyle.smoking.smoke_quantity}
                  tr
                    td
                      legend Have you received vitamin pills during the last year?
                      span #{result.lifestyle.vitamins_last_year.presence}
                  if result.lifestyle.vitamins_last_year != "Never"
                    tr
                      td
                        legend Quantity
                        span #{result.lifestyle.vitamins_last_year.quantity}
            .tables_list      
              legend What type of vitamins did you receive and how often?
              .group
                .divTable
                  .divTableRow(style="border: 1px solid rgb(221, 221, 221); background-color: rgb(243, 243, 243); color: rgb(14, 14, 14); height: 30px; font-family: Verdana, Helvetica, Arial, FreeSans, sans-serif; font-size: 14px; text-transform: capitalize;")
                    .divTableCell &beta;-carotene
                    .divTableCell Vitamin A
                    .divTableCell Vitamin C
                  .divTableRow
                    .divTableCell
                      span #{result.lifestyle.betacarotene_frequency}
                    .divTableCell
                      span #{result.lifestyle.vitamin_A_frequency}
                    .divTableCell
                      span #{result.lifestyle.vitamin_C_frequency}
                  .divTableRow(style="border: 1px solid rgb(221, 221, 221); background-color: rgb(243, 243, 243); color: rgb(14, 14, 14); height: 30px; font-family: Verdana, Helvetica, Arial, FreeSans, sans-serif; font-size: 14px; text-transform: capitalize;")
                    .divTableCell Vitamin D
                    .divTableCell Vitamin E
                    .divTableCell Multivitamins
                  .divTableRow
                    .divTableCell
                      span #{result.lifestyle.vitamin_D_frequency}
                    .divTableCell
                      span #{result.lifestyle.vitamin_E_frequency}
                    .divTableCell
                      span #{result.lifestyle.multivitamins_frequency}

            .tables_list
              legend For how long did you receive vitamins?
              .group
                .divTable
                  .divTableRow(style="border: 1px solid rgb(221, 221, 221); background-color: rgb(243, 243, 243); color: rgb(14, 14, 14); height: 30px; font-family: Verdana, Helvetica, Arial, FreeSans, sans-serif; font-size: 14px; text-transform: capitalize;")
                    .divTableCell &beta;-carotene
                    .divTableCell Vitamin A
                    .divTableCell Vitamin C
                  .divTableRow
                    .divTableCell
                      span #{result.lifestyle.betacarotene_period}
                    .divTableCell
                      span #{result.lifestyle.vitamin_A_period}
                    .divTableCell
                      span #{result.lifestyle.vitamin_C_period}
                  .divTableRow(style="border: 1px solid rgb(221, 221, 221); background-color: rgb(243, 243, 243); color: rgb(14, 14, 14); height: 30px; font-family: Verdana, Helvetica, Arial, FreeSans, sans-serif; font-size: 14px; text-transform: capitalize;")
                    .divTableCell Vitamin D
                    .divTableCell Vitamin E
                    .divTableCell Multivitamins
                  .divTableRow
                    .divTableCell
                      span #{result.lifestyle.vitamin_D_period}
                    .divTableCell
                      span #{result.lifestyle.vitamin_E_period}
                    .divTableCell
                      span #{result.lifestyle.multivitamins_period}
          
          </details>
          
          <details>
            <summary>CLINICAL EXAMINATION</summary>
            <hr/>

            table.summary-table
              tbody
                tr
                  td
                    legend Solar lentigines severity
                    span #{result.clinical_examination.solar_lentigines_frequency}
                  td
                    legend Solar lentigines at melanoma
                    span #{result.clinical_examination.solar_lentigines_at_melanoma}

            .tables_list
              legend Nevi count
              .form-group
                .divTable
                  .divTableRow
                    .divTableCell(style='width:40%;') Site
                    .divTableCell(style='width:30%;') Number(left)
                    .divTableCell(style='width:30%;') Number(right)
                  .divTableRow
                    .divTableCell(style='width:40%;') Scalp
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_scalp}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_scalp}
                  .divTableRow
                    .divTableCell(style='width:40%;') Face(including ears)
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_face}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_face}
                  .divTableRow
                    .divTableCell(style='width:40%;') Neck
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_neck}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_neck}
                  .divTableRow
                    .divTableCell(style='width:40%;') Anterior thorax + abdomen
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_thorax_abdomen}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_thorax_abdomen}
                  .divTableRow
                    .divTableCell(style='width:40%;') Back
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_back}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_back}
                  .divTableRow
                    .divTableCell(style='width:40%;') Upper extremities including deltoid
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_deltoid}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_deltoid}
                  .divTableRow
                    .divTableCell(style='width:40%;') Lower extremities including gluteus
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_gluteus}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_gluteus}
                  .divTableRow
                    .divTableCell(style='width:40%;') Palms
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_palms}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_palms}
                  .divTableRow
                    .divTableCell(style='width:40%;') Soles
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.left_soles}
                    .divTableCell(style='width:30%;')
                      span #{result.clinical_examination.nevi_count.right_soles}
            
            table.summary-table
              tbody
                tr
                  td
                    legend Nevi 2mm count
                    span #{result.clinical_examination.nevi_2mm_count}

                tr
                  td
                    legend Clinically atypical nevi
                    span #{result.clinical_examination.atypical_nevi_count}

                tr
                  td
                    legend Congenital nevi Medium sized
                    span #{result.clinical_examination.congenital_nevi.medium_sized.presence}
                  if result.clinical_examination.congenital_nevi.giant_sized.presence == "Yes"
                    td
                      legend Sites
                      span #{result.clinical_examination.congenital_nevi.medium_sized.sites}
                tr
                  td
                    legend Congenital nevi Large sized
                    span #{result.clinical_examination.congenital_nevi.large_sized.presence}
                  if result.clinical_examination.congenital_nevi.giant_sized.presence == "Yes"
                    td
                      legend Sites
                      span #{result.clinical_examination.congenital_nevi.large_sized.sites}
                tr
                  td
                    legend Congenital nevi Giant sized
                    span #{result.clinical_examination.congenital_nevi.giant_sized.presence}
                  if result.clinical_examination.congenital_nevi.giant_sized.presence == "Yes"
                    td
                      legend Sites
                      span #{result.clinical_examination.congenital_nevi.giant_sized.sites}
                      
                tr
                  td
                    legend Blue Nevi
                    span #{result.clinical_examination.blue_nevi.presence}
                  if result.clinical_examination.blue_nevi.presence == "Yes"
                    td
                      legend Count
                      span #{result.clinical_examination.blue_nevi.count}

                tr
                  td
                    legend Actinic keratoses
                    span #{result.clinical_examination.actinic_keratoses.presence}
                  if result.clinical_examination.actinic_keratoses.presence == "Yes"
                    td
                      legend Site
                      span #{result.clinical_examination.actinic_keratoses.site}
                    td
                      legend Distribution
                      span #{result.clinical_examination.actinic_keratoses.distribution}

                span Current (i.e. at time of visit) non-melanoma skin cancer
                tr
                  td
                    legend BCC
                    span #{result.clinical_examination.BCC.presence}
                  if result.clinical_examination.BCC.presence == "Yes"
                    td
                      legend Sites
                      span #{result.clinical_examination.BCC.sites}
                    td
                      legend Count
                      span #{result.clinical_examination.BCC.count}
                tr
                  td
                    legend Invasive SCC
                    span #{result.clinical_examination.invasive_SCC.presence}
                  if result.clinical_examination.BCC.presence == "Yes"
                    td
                      legend Sites
                      span #{result.clinical_examination.invasive_SCC.sites}
                    td
                      legend Count
                      span #{result.clinical_examination.invasive_SCC.count}
                tr
                  td
                    legend In situ SCC
                    span #{result.clinical_examination.insitu_SCC.presence}
                  if result.clinical_examination.BCC.presence == "Yes"
                    td
                      legend Sites
                      span #{result.clinical_examination.insitu_SCC.sites}
                    td
                      legend Count
                      span #{result.clinical_examination.insitu_SCC.count}
          
          </details>



          table.summary-table(style='margin-left: 2px;')
            tbody
                tr
                  td
                    legend Were you able to respond to the questions of the last three sections? 
                    span #{result.section_B_evaluation.completed}
                tr
                  td
                    legend Which questions of this section did you consider difficult to fill in? 
                    span #{result.section_B_evaluation.difficult.answer}
                  if result.section_B_evaluation.difficult.answer != "None"
                    td
                      legend Questions numbers:
                      span #{result.section_B_evaluation.difficult.questions}



          <details>
            <summary>MEDICAL HISTORY</summary>
            <hr/>

            .tables_list
              legend History of medical (non-cancer) diagnoses
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Code</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.medical_history.diagnoses) !== 'undefined')
                  each diagnose in result.medical_history.diagnoses
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{diagnose.code}</td>
                      <td>#{diagnose.desc}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No diagnoses</td>
                  </tr>
                </tbody>
              </table>

            <br>

            .tables_list
              legend Previous and concomitant treatments (related to above-mentioned diagnoses)
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Start date</th>
                    <th>End date</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.medical_history.medication_list) !== 'undefined')
                  each med in result.medical_history.medication_list
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{med.start_date}</td>
                      <td>#{med.end_date}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No medications</td>
                  </tr>
                </tbody>
              </table>

            <br/>
            table.summary-table
              legend Have you ever become pregnant?
              span #{result.medical_history.pregnancy.presence}
              if result.medical_history.pregnancy.presence == "Yes"
                table.summary-table
                  tbody
                    tr
                      td
                        legend Number of full-term pregnancies:
                        span #{result.medical_history.pregnancy.count}
                      td
                        legend Date of birth of children:
                        span #{result.medical_history.pregnancy.birthday}
                      td
                        legend Number of miscarriages:
                        span #{result.medical_history.pregnancy.miscarriages}

                    tr
                      td
                        legend Did melanoma occur during pregnancy ?
                        span #{result.medical_history.pregnancy.melanoma_in_the_same_period}

                    tr
                      td
                        legend Did melanoma occur before pregnancy ?
                        span #{result.medical_history.pregnancy.melanoma_before_pregnancy.presence}
                      if result.medical_history.pregnancy.melanoma_before_pregnancy.presence == "Yes"
                        td
                          legend How many years before pregnancy ?
                          span #{result.medical_history.pregnancy.melanoma_before_pregnancy.years_before}

                    tr
                      td
                        legend Did melanoma occur after pregnancy ?
                        span #{result.medical_history.pregnancy.melanoma_after_pregnancy.presence}
                      if result.medical_history.pregnancy.melanoma_after_pregnancy.presence == "Yes"
                        td
                          legend How many years after pregnancy ?
                          span #{result.medical_history.pregnancy.melanoma_after_pregnancy.years_after}

                    tr
                      td
                        legend History of hormone-assisted pregnancy (IVF) before diagnosis ?
                        span #{result.medical_history.pregnancy.hormone}

            
            table.summary-table
              <br/>
              legend Lifetime history of non-melanoma skin cancer, KSC (basal cell carcinoma, BCC, and squamous cell carcinoma, SCC)                    
              tbody
                  tr
                    td
                      legend Before or After melanoma diagnosis?
                      span #{result.medical_history.BCC.period}
                    td
                      legend Number of BCCs
                      span #{result.medical_history.BCC.count}
              
            .tables_list
              legend BCC list
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Type</th>
                    <th>Site</th>
                    <th>Diagnosis Date</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.medical_history.BCC.sites) !== 'undefined')
                  each bcc in result.medical_history.BCC.sites
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{bcc.Site}</td>
                      <td>#{bcc.Type}</td>
                      <td>#{bcc.Diagnosis_date}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No BCCs</td>
                  </tr>
                </tbody>
              </table>

            table.summary-table                   
              tbody
                  tr
                    td
                      legend Before or After melanoma diagnosis?
                      span #{result.medical_history.SSC.period}
                    td
                      legend Number of SCCs
                      span #{result.medical_history.SSC.count}

            .tables_list
              legend Invasive SCC list
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Type</th>
                    <th>Site</th>
                    <th>Diagnosis Date</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.medical_history.SSC.sites) !== 'undefined')
                  each scc in result.medical_history.SSC.sites
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{scc.Site}</td>
                      <td>#{scc.Type}</td>
                      <td>#{scc.Diagnosis_date}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No SCCs</td>
                  </tr>
                </tbody>
              </table>

            table.summary-table                  
              tbody
                  tr
                    td
                      legend Before or After melanoma diagnosis?
                      span #{result.medical_history.SSC_in_situ.period}
                    td
                      legend Number of 'in situ SCCs'
                      span #{result.medical_history.SSC_in_situ.count}

            .tables_list
              legend In situ SCC list
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Type</th>
                    <th>Site</th>
                    <th>Diagnosis Date</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.medical_history.SSC_in_situ.sites) !== 'undefined')
                  each insituSCC in result.medical_history.SSC_in_situ.sites
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{insituSCC.Site}</td>
                      <td>#{insituSCC.Type}</td>
                      <td>#{insituSCC.Diagnosis_date}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No SCCs</td>
                  </tr>
                </tbody>
              </table>

            <br/>
            .tables_list
              legend Other non-cutaneous neoplasia
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Name</th>
                    <th>Age Of Diagnosis</th>
                    <th>Year Of Diagnosis</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.medical_history.neoplasias) !== 'undefined')
                  each neoplasia in result.medical_history.neoplasias
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{neoplasia.Name}</td>
                      <td>#{neoplasia.Age_of_diagnosis}</td>
                      <td>#{neoplasia.Year_of_diagnosis}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No neoplasia</td>
                  </tr>
                </tbody>
              </table>

          </details>



          <details>
            <summary>FAMILY HISTORY</summary>
            <hr/>

            .tables_list
              legend Family history of melanoma
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Presence</th>
                    <th>Melanoma</th>
                    <th>Side</th>
                    <th>Degree</th>
                    <th>Diagnosis age</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.family_history.relatives_with_melanoma) !== 'undefined')
                  each rel in result.family_history.relatives_with_melanoma
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{rel.presence}</td>
                      <td>#{rel.melanoma}</td>
                      <td>#{rel.side}</td>                      
                      <td>#{rel.degree}</td>                      
                      <td>#{rel.diagnosis_age}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No relatives with melanoma</td>
                  </tr>
                </tbody>
              </table>

            if (typeof(result.family_history.germline) !== 'undefined')
              table.summary-table                  
                tbody
                    tr
                      td
                        legend Germline status
                        span #{result.family_history.germline}

            .tables_list
              legend Family history of other cancers
              <table class="json-to-table">
                <thead>
                  <tr>
                    <th class="jsl"></th>
                    <th>Cancer Type</th>
                    <th>Side</th>
                    <th>Degree</th>
                    <th>Pedigree</th>
                  </tr>
                </thead>
                <tbody>
                if (typeof(result.family_history.relatives_with_other_cancers) !== 'undefined')
                  each rel in result.family_history.relatives_with_other_cancers
                    <tr>
                      <td class="jsl">1</td>
                      <td>#{rel.cancer_type}</td>
                      <td>#{rel.side}</td>
                      <td>#{rel.degree}</td>                      
                      <td>#{rel.pedigree}</td>
                    </tr>
                else
                  <tr>
                    <td class="jsl"></td>
                    <td colspan='2'>No relatives with other cancers</td>
                  </tr>
                </tbody>
              </table>
            
          </details>

          table.summary-table(style='margin-left: 2px;')
            tbody
                tr
                  td
                    legend Were you able to respond to the questions of the last three sections? 
                    span #{result.section_C_evaluation.completed}
                tr
                  td
                    legend Which questions of this section did you consider difficult to fill in? 
                    span #{result.section_C_evaluation.difficult.answer}
                  if result.section_C_evaluation.difficult.answer != "None"
                    td
                      legend Questions numbers:
                      span #{result.section_C_evaluation.difficult.questions}

          if (typeof(result.melanoma_characteristics) !== 'undefined')
          
            if (typeof(result.melanoma_characteristics.first_melanoma) !== 'undefined')
              <details>
                <summary>CHARACTERISTICS OF 1st PRIMARY MELANOMA</summary>
                <hr/>

                table.summary-table
                  tbody
                    tr
                      td
                        legend Pre-existing pigmented lesion at the same site of melanoma
                        span #{result.melanoma_characteristics.first_melanoma.lesion.presence}
                      if result.melanoma_characteristics.first_melanoma.lesion.presence == "Yes"
                        td
                          legend Number:
                          span #{result.melanoma_characteristics.first_melanoma.lesion.count}
                    tr
                      td
                        legend Detection of melanoma
                        span #{result.melanoma_characteristics.first_melanoma.detection}
                      if result.melanoma_characteristics.first_melanoma.detection == "Yes"
                        td
                          legend Specific
                          span #{result.melanoma_characteristics.first_melanoma.other_detection}

                    tr
                      td
                        legend How often did you check your skin in the past 3 yrs?
                        span #{result.melanoma_characteristics.first_melanoma.self_skin_check_last_3_years}
                      td
                        legend How often did you check your skin in the past 3 yrs?
                        span #{result.melanoma_characteristics.first_melanoma.skin_check_last_3_years}

                    tr
                      td
                        legend Sentinel Lymph Node (SLN) biopsy
                        span #{result.melanoma_characteristics.first_melanoma.SNL.presence}
                      if result.melanoma_characteristics.first_melanoma.lesion.presence == "Yes"
                        td
                          legend Category
                          span #{result.melanoma_characteristics.first_melanoma.SNL.category}

                    tr
                      td
                        legend Multiple primary melanoma (MPM) – concurrent or previous
                        span #{result.melanoma_characteristics.first_melanoma.multiple_primary.presence}
                      if result.melanoma_characteristics.first_melanoma.multiple_primary.presence == "Yes"
                          td
                            legend Number of primaries:
                            span #{result.melanoma_characteristics.first_melanoma.multiple_primary.count}

                    tr
                      td
                        legend Dates of diagnosis
                        span #{result.melanoma_characteristics.first_melanoma.diagnosis_date}

                    tr
                      td
                        legend Is the primary tumor known?
                        span #{result.melanoma_characteristics.first_melanoma.known.presence}

                if result.melanoma_characteristics.first_melanoma.known.presence == "Yes"
                  label Other main histopathologic features
                  table.summary-table
                    tbody
                      tr
                        td
                          legend Is the primary tumor known?
                          span #{result.melanoma_characteristics.first_melanoma.known.site}
                        td
                          legend Breslow thickness(mm)
                          span #{result.melanoma_characteristics.first_melanoma.known.breslow_thickness}

                      tr
                        td
                          legend Subtype:
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.subtype}

                      tr
                        td
                          legend Mitotic rate (number of mitoses/mm2):
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.mitotic_rate}

                      tr
                        td
                          legend Ulceration
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.ulceration}

                      tr
                        td
                          legend Tumor growth phase 
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.tumor_growth_phase}

                      tr
                        td
                          legend Regression
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.regression.presence}
                        if result.melanoma_characteristics.first_melanoma.known.histopathologic_features.regression.presence == "present"
                          td
                            legend Specify percentage:
                            span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.regression.percentage}

                      tr
                        td
                          legend Tumor Infiltrating Lymphocytes (TILs) 
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.TILs}

                      tr
                        td
                          legend Associated nevus
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.nevus.presence}
                        if result.melanoma_characteristics.first_melanoma.known.histopathologic_features.nevus.presence == "present"
                          td
                            legend Specify type:
                            span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.nevus.type}

                      tr
                        td
                          legend Vascular invasion 
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.vascular_invasion}

                      tr
                        td
                          legend Microsatellitosis
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.microsatellitosis}

                      tr
                        td
                          legend Solar elastosis 
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.solar_elastosis}

                      tr
                        td
                          legend Pigmentation
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.pigmentation}

                      tr
                        td
                          legend Lateral margin status
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.lateral_margin_status}

                      tr
                        td
                          legend Deep margin status 
                          span #{result.melanoma_characteristics.first_melanoma.known.histopathologic_features.deep_margin_status}

                  legend AJCC stage at diagnosis using TNM staging system
                  table.summary-table
                    tbody
                      tr
                        td
                          legend T category 
                          span #{result.melanoma_characteristics.first_melanoma.known.AJCC.T}
                        td
                          legend N category 
                          span #{result.melanoma_characteristics.first_melanoma.known.AJCC.N}
                        td
                          legend M category 
                          span #{result.melanoma_characteristics.first_melanoma.known.AJCC.M}

            </details>

            if (typeof(result.melanoma_characteristics.second_melanoma) !== 'undefined')
              <details>
                <summary>CHARACTERISTICS OF 2nd PRIMARY MELANOMA</summary>
                <hr/>

                table.summary-table
                  tbody
                    tr
                      td
                        legend Pre-existing pigmented lesion at the same site of melanoma
                        span #{result.melanoma_characteristics.second_melanoma.lesion.presence}
                      if result.melanoma_characteristics.second_melanoma.lesion.presence == "Yes"
                        td
                          legend Number:
                          span #{result.melanoma_characteristics.second_melanoma.lesion.count}
                    tr
                      td
                        legend Detection of melanoma
                        span #{result.melanoma_characteristics.second_melanoma.detection}
                      if result.melanoma_characteristics.second_melanoma.detection == "Yes"
                        td
                          legend Specific
                          span #{result.melanoma_characteristics.second_melanoma.other_detection}

                    tr
                      td
                        legend How often did you check your skin in the past 3 yrs?
                        span #{result.melanoma_characteristics.second_melanoma.self_skin_check_last_3_years}
                      td
                        legend How often did you check your skin in the past 3 yrs?
                        span #{result.melanoma_characteristics.second_melanoma.skin_check_last_3_years}

                    tr
                      td
                        legend Sentinel Lymph Node (SLN) biopsy
                        span #{result.melanoma_characteristics.second_melanoma.SNL.presence}
                      if result.melanoma_characteristics.second_melanoma.lesion.presence == "Yes"
                        td
                          legend Category
                          span #{result.melanoma_characteristics.second_melanoma.SNL.category}

                    tr
                      td
                        legend Multiple primary melanoma (MPM) – concurrent or previous
                        span #{result.melanoma_characteristics.second_melanoma.multiple_primary.presence}
                      if result.melanoma_characteristics.second_melanoma.multiple_primary.presence == "Yes"
                          td
                            legend Number of primaries:
                            span #{result.melanoma_characteristics.second_melanoma.multiple_primary.count}

                    tr
                      td
                        legend Dates of diagnosis
                        span #{result.melanoma_characteristics.second_melanoma.diagnosis_date}

                    tr
                      td
                        legend Is the primary tumor known?
                        span #{result.melanoma_characteristics.second_melanoma.known.presence}

                if result.melanoma_characteristics.second_melanoma.known.presence == "Yes"
                  label Other main histopathologic features
                  table.summary-table
                    tbody
                      tr
                        td
                          legend Is the primary tumor known?
                          span #{result.melanoma_characteristics.second_melanoma.known.site}
                        td
                          legend Breslow thickness(mm)
                          span #{result.melanoma_characteristics.second_melanoma.known.breslow_thickness}

                      tr
                        td
                          legend Subtype:
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.subtype}

                      tr
                        td
                          legend Mitotic rate (number of mitoses/mm2):
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.mitotic_rate}

                      tr
                        td
                          legend Ulceration
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.ulceration}

                      tr
                        td
                          legend Tumor growth phase 
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.tumor_growth_phase}

                      tr
                        td
                          legend Regression
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.regression.presence}
                        if result.melanoma_characteristics.second_melanoma.known.histopathologic_features.regression.presence == "present"
                          td
                            legend Specify percentage:
                            span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.regression.percentage}

                      tr
                        td
                          legend Tumor Infiltrating Lymphocytes (TILs) 
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.TILs}

                      tr
                        td
                          legend Associated nevus
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.nevus.presence}
                        if result.melanoma_characteristics.second_melanoma.known.histopathologic_features.nevus.presence == "present"
                          td
                            legend Specify type:
                            span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.nevus.type}

                      tr
                        td
                          legend Vascular invasion 
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.vascular_invasion}

                      tr
                        td
                          legend Microsatellitosis
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.microsatellitosis}

                      tr
                        td
                          legend Solar elastosis 
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.solar_elastosis}

                      tr
                        td
                          legend Pigmentation
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.pigmentation}

                      tr
                        td
                          legend Lateral margin status
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.lateral_margin_status}

                      tr
                        td
                          legend Deep margin status 
                          span #{result.melanoma_characteristics.second_melanoma.known.histopathologic_features.deep_margin_status}

                  legend AJCC stage at diagnosis using TNM staging system
                  table.summary-table
                    tbody
                      tr
                        td
                          legend T category 
                          span #{result.melanoma_characteristics.second_melanoma.known.AJCC.T}
                        td
                          legend N category 
                          span #{result.melanoma_characteristics.second_melanoma.known.AJCC.N}
                        td
                          legend M category 
                          span #{result.melanoma_characteristics.second_melanoma.known.AJCC.M}

            </details>

            if (typeof(result.melanoma_characteristics.third_melanoma) !== 'undefined')
              <details>
                <summary>CHARACTERISTICS OF 3rd PRIMARY MELANOMA</summary>
                <hr/>

                table.summary-table
                  tbody
                    tr
                      td
                        legend Pre-existing pigmented lesion at the same site of melanoma
                        span #{result.melanoma_characteristics.third_melanoma.lesion.presence}
                      if result.melanoma_characteristics.third_melanoma.lesion.presence == "Yes"
                        td
                          legend Number:
                          span #{result.melanoma_characteristics.third_melanoma.lesion.count}
                    tr
                      td
                        legend Detection of melanoma
                        span #{result.melanoma_characteristics.third_melanoma.detection}
                      if result.melanoma_characteristics.third_melanoma.detection == "Yes"
                        td
                          legend Specific
                          span #{result.melanoma_characteristics.third_melanoma.other_detection}

                    tr
                      td
                        legend How often did you check your skin in the past 3 yrs?
                        span #{result.melanoma_characteristics.third_melanoma.self_skin_check_last_3_years}
                      td
                        legend How often did you check your skin in the past 3 yrs?
                        span #{result.melanoma_characteristics.third_melanoma.skin_check_last_3_years}

                    tr
                      td
                        legend Sentinel Lymph Node (SLN) biopsy
                        span #{result.melanoma_characteristics.third_melanoma.SNL.presence}
                      if result.melanoma_characteristics.third_melanoma.lesion.presence == "Yes"
                        td
                          legend Category
                          span #{result.melanoma_characteristics.third_melanoma.SNL.category}

                    tr
                      td
                        legend Multiple primary melanoma (MPM) – concurrent or previous
                        span #{result.melanoma_characteristics.third_melanoma.multiple_primary.presence}
                      if result.melanoma_characteristics.third_melanoma.multiple_primary.presence == "Yes"
                          td
                            legend Number of primaries:
                            span #{result.melanoma_characteristics.third_melanoma.multiple_primary.count}

                    tr
                      td
                        legend Dates of diagnosis
                        span #{result.melanoma_characteristics.third_melanoma.diagnosis_date}

                    tr
                      td
                        legend Is the primary tumor known?
                        span #{result.melanoma_characteristics.third_melanoma.known.presence}

                if result.melanoma_characteristics.third_melanoma.known.presence == "Yes"
                  label Other main histopathologic features
                  table.summary-table
                    tbody
                      tr
                        td
                          legend Is the primary tumor known?
                          span #{result.melanoma_characteristics.third_melanoma.known.site}
                        td
                          legend Breslow thickness(mm)
                          span #{result.melanoma_characteristics.third_melanoma.known.breslow_thickness}

                      tr
                        td
                          legend Subtype:
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.subtype}

                      tr
                        td
                          legend Mitotic rate (number of mitoses/mm2):
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.mitotic_rate}

                      tr
                        td
                          legend Ulceration
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.ulceration}

                      tr
                        td
                          legend Tumor growth phase 
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.tumor_growth_phase}

                      tr
                        td
                          legend Regression
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.regression.presence}
                        if result.melanoma_characteristics.third_melanoma.known.histopathologic_features.regression.presence == "present"
                          td
                            legend Specify percentage:
                            span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.regression.percentage}

                      tr
                        td
                          legend Tumor Infiltrating Lymphocytes (TILs) 
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.TILs}

                      tr
                        td
                          legend Associated nevus
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.nevus.presence}
                        if result.melanoma_characteristics.third_melanoma.known.histopathologic_features.nevus.presence == "present"
                          td
                            legend Specify type:
                            span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.nevus.type}

                      tr
                        td
                          legend Vascular invasion 
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.vascular_invasion}

                      tr
                        td
                          legend Microsatellitosis
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.microsatellitosis}

                      tr
                        td
                          legend Solar elastosis 
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.solar_elastosis}

                      tr
                        td
                          legend Pigmentation
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.pigmentation}

                      tr
                        td
                          legend Lateral margin status
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.lateral_margin_status}

                      tr
                        td
                          legend Deep margin status 
                          span #{result.melanoma_characteristics.third_melanoma.known.histopathologic_features.deep_margin_status}

                  legend AJCC stage at diagnosis using TNM staging system
                  table.summary-table
                    tbody
                      tr
                        td
                          legend T category 
                          span #{result.melanoma_characteristics.third_melanoma.known.AJCC.T}
                        td
                          legend N category 
                          span #{result.melanoma_characteristics.third_melanoma.known.AJCC.N}
                        td
                          legend M category 
                          span #{result.melanoma_characteristics.third_melanoma.known.AJCC.M}

            </details>


        div.alphaformfooter
        div.formfooter
        button.previous.action-button(onclick="window.location.href = '/home';" type='button' name='previous') Go back
        button.update.action-button(
                              type='submit' 
                              name='codeNumber' 
                              value=result.general.code_number
                              onclick="var t = document.getElementById(\"msform\"); t.classList.add(\"fade-out-top\");"
                            ) Update